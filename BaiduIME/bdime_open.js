(function(){var B=(new Date()).getTime();function L(C){return document.getElementById(C)}function O(C){return document.createElement(C)}function Q(U,G,C){if(window.attachEvent){U.attachEvent("on"+G,C)}else{if(window.addEventListener){U.addEventListener(G,C,false)}}}function M(U,G,C){if(window.attachEvent){U.detachEvent("on"+G,C)}else{if(window.addEventListener){U.removeEventListener(G,C,false)}}}function P(C){C.style.display="block"}function D(C){C.style.display="none"}function F(G,C){C=C.replace(/\-(\w)/g,function(U,V){return V.toUpperCase()});if(H.isIE){return G.currentStyle[C]}else{return document.defaultView.getComputedStyle(G,null)[C]}}function E(G,C,U){G.style[C]=U}function J(C){return C.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r\n|\r|\n/g,"<br>").replace(/\s/g,"&nbsp;")}function T(U,Y){var Z;if(!Y){Z=document}else{Z=Y.document}var C=Z.documentElement,G=Z.body;var X=0;var W=0;if(U.getBoundingClientRect){var V=U.getBoundingClientRect();X=V.left+Math.max(C.scrollLeft,G.scrollLeft);W=V.top+Math.max(C.scrollTop,G.scrollTop);X-=C.clientLeft;W-=C.clientTop}else{while(U.offsetParent){X+=U.offsetLeft;W+=U.offsetTop;U=U.offsetParent}}return{x:X,y:W}}function I(){var X=navigator;if(X.plugins&&X.mimeTypes.length){var U=X.plugins["Shockwave Flash"];if(U&&U.description){return U.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s)+r/,".")+".0"}}else{if(window.ActiveXObject&&!window.opera){for(var G=10;G>=2;G--){try{var W=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+G);if(W){var C=W.GetVariable("\x24version");return C.replace(/WIN/g,"").replace(/,/g,".")}}catch(V){}}}}}function S(G,C,V,X,W){var U=window["BD_PS_C"+(new Date()).getTime()]=new Image();U.src="http://nsclick.baidu.com/v.gif?pid=201&pj=ui_py&time="+G+"&on="+C+"&ch="+V+"&bc="+X+"&pt="+W+"&t="+new Date().getTime()}var R={create:function(){return function(){this.initialize.apply(this,arguments)}}};var N=navigator.userAgent;var H={status:{enable:0,ch:1,bc:1,pt:1,on:1},option:{tRight:50,tBottom:30,panelH:59},domain:"",usr:"",inputs:[],isClose:false,isIE:(/msie (\d+)/i.test(N)&&!window.opera)?parseInt(RegExp.$1):0,isFirefox:/firefox/i.test(N),isOpera:/opera/i.test(N)&&window.opera,isStrict:document.compatMode=="CSS1Compat",shownum:5,curSelectNum:1,iptTargets:[],iptCurTarget:null,inputsource:"",tempsource:"",inputselected:"",isBlur:true,needIptBack:false,selectLock:true,pageT:null,pageTimes:0,isSubAddr:false,cursorHtml:"<span id='bdime_cursor'></span>",feedbackLink:"<a href='http://tieba.baidu.com/f?kw=%E7%99%BE%E5%BA%A6%E5%9C%A8%E7%BA%BF%E8%BE%93%E5%85%A5%E6%B3%95&ie=utf-8' target='_blank'>\u53cd\u9988</a>",hasSug:false,panelShow:function(){},panelHide:function(){}};var A=[];A[32]=[" ","\u3000"," "," "," "," "];A[48]=["0","0","\uff10",")","\uff09","\uff09"];A[49]=["1","1","\uff11","!","\uff01","\uff01"];A[50]=["2","2","\uff12","@","\uff20","@"];A[51]=["3","3","\uff13","#","\uff03","#"];A[52]=["4","4","\uff14","$","\uff04","\uffe5"];A[53]=["5","5","\uff15","%","\uff05","\uff05"];A[54]=["6","6","\uff16","^","\uff3e","\u2026\u2026"];A[55]=["7","7","\uff17","&","\uff06","&"];A[56]=["8","8","\uff18","*","\uff0a","*"];A[57]=["9","9","\uff19","(","\uff08","\uff08"];A[65]=["a","\uff41","\uff41","A","\uff21","\uff21"];A[66]=["b","\uff42","\uff42","B","\uff22","\uff22"];A[67]=["c","\uff43","\uff43","C","\uff23","\uff23"];A[68]=["d","\uff44","\uff44","D","\uff24","\uff24"];A[69]=["e","\uff45","\uff45","E","\uff25","\uff25"];A[70]=["f","\uff46","\uff46","F","\uff26","\uff26"];A[71]=["g","\uff47","\uff47","G","\uff27","\uff27"];A[72]=["h","\uff48","\uff48","H","\uff28","\uff28"];A[73]=["i","\uff49","\uff49","I","\uff29","\uff29"];A[74]=["j","\uff4a","\uff4a","J","\uff2a","\uff2a"];A[75]=["k","\uff4b","\uff4b","K","\uff2b","\uff2b"];A[76]=["l","\uff4c","\uff4c","L","\uff2c","\uff2c"];A[77]=["m","\uff4d","\uff4d","M","\uff2d","\uff2d"];A[78]=["n","\uff4e","\uff4e","N","\uff2e","\uff2e"];A[79]=["o","\uff4f","\uff4f","O","\uff2f","\uff2f"];A[80]=["p","\uff50","\uff50","P","\uff30","\uff30"];A[81]=["q","\uff51","\uff51","Q","\uff31","\uff31"];A[82]=["r","\uff52","\uff52","R","\uff32","\uff32"];A[83]=["s","\uff53","\uff53","S","\uff33","\uff33"];A[84]=["t","\uff54","\uff54","T","\uff34","\uff34"];A[85]=["u","\uff55","\uff55","U","\uff35","\uff35"];A[86]=["v","\uff56","\uff56","V","\uff36","\uff36"];A[87]=["w","\uff57","\uff57","W","\uff37","\uff37"];A[88]=["x","\uff58","\uff58","X","\uff38","\uff38"];A[89]=["y","\uff59","\uff59","Y","\uff39","\uff39"];A[90]=["z","\uff5a","\uff5a","Z","\uff3a","\uff3a"];A[96]=["0","0","\uff10",")","\uff09","\uff09"];A[97]=["1","1","\uff11","!","\uff01","\uff01"];A[98]=["2","2","\uff12","@","\uff20","@"];A[99]=["3","3","\uff13","#","\uff03","#"];A[100]=["4","4","\uff14","$","\uff04","\uffe5"];A[101]=["5","5","\uff15","%","\uff05","\uff05"];A[102]=["6","6","\uff16","^","\uff3e","\u2026\u2026"];A[103]=["7","7","\uff17","&","\uff06","&"];A[104]=["8","8","\uff18","*","\uff0a","*"];A[105]=["9","9","\uff19","(","\uff08","\uff08"];A[106]=["*","\uff0a","*","*","\uff0a","*"];A[107]=["+","\uff0b","+","+","\uff0b","+"];A[109]=["-","\uff0d","-","-","\uff0d","-"];A[110]=[".","\uff0e",".",".","\uff0e","."];A[111]=["/","\uff0f","/","/","\uff0f","/"];A[186]=[";","\uff1b","\uff1b",":","\uff1a","\uff1a"];A[187]=["=","\uff1d","=","+","\uff0b","+"];A[188]=[",","\uff0c","\uff0c","<","\uff1c","\u300a"];A[189]=["-","\uff0d","-","_","\uff3f","\u2014\u2014"];A[190]=[".","\uff0e","\u3002",">","\uff1e","\u300b"];A[191]=["/","\uff0f","\u3001","?","\uff1f","\uff1f"];A[192]=["`","\uff40","\u00b7","~","\uff5e","\uff5e"];A[219]=["[","\uff3b","\u3010","{","\uff5b","{"];A[220]=["\\","\uff3c","\u3001","|","\uff5c","|"];A[221]=["]","\uff3d","\u3011","}","\uff5d","}"];A[222]=["'","\uff07","\u2018","\u2019",'"',"\uff02","\u201c","\u201d"];H.build=(function(){function U(Z){if(H.isIE){var a=document.createStyleSheet();a.cssText=Z}else{var Y=O("style");Y.type="text/css";Y.appendChild(document.createTextNode(Z));document.getElementsByTagName("HEAD")[0].appendChild(Y)}if(H.isIE==6){X()}}function X(){var Z=" url(about:blank) fixed";var Y=document.documentElement,a=document.body;if(Y.currentStyle.backgroundImage=="none"){Y.style.background=Y.currentStyle.backgroundColor+Z}else{if(a.currentStyle.backgroundImage=="none"){a.style.background=a.currentStyle.backgroundColor+Z}}}function C(){var Y=[];Y.push("#bdime_tools{height:26px;font-size:12px;color:#000;position:absolute;z-index:99999;-moz-user-select:none;display:none}");Y.push("#bdime_tools_on{width:140px;height:26px;background:url(http://www.baidu.com/olime/ime_bg.gif);position:absolute;right:0}");Y.push("#bdime_tools_on span{width:23px;height:26px;display:inline-block;background:url(http://www.baidu.com/olime/ime_bg.gif);cursor:pointer}");Y.push("span#bdime_tools_drag{width:36px;background:none;cursor:move}");Y.push("#bdime_tools_on .close_default{width:35px;background:none}");Y.push("#bdime_tools_on .close_hover{width:35px;background-position:-105px -27px}");Y.push("#bdime_tools_on .ch_a_default{background-position:-36px 0}");Y.push("#bdime_tools_on .ch_a_hover{background-position:-36px -27px}");Y.push("#bdime_tools_on .ch_b_default{background-position:-36px -54px}");Y.push("#bdime_tools_on .ch_b_hover{background-position:-36px -81px}");Y.push("#bdime_tools_on .bc_a_default{background-position:-59px 0}");Y.push("#bdime_tools_on .bc_a_hover{background-position:-59px -27px}");Y.push("#bdime_tools_on .bc_b_default{background-position:-59px -54px}");Y.push("#bdime_tools_on .bc_b_hover{background-position:-59px -81px}");Y.push("#bdime_tools_on .pt_a_default{background-position:-81px 0}");Y.push("#bdime_tools_on .pt_a_hover{background-position:-81px -27px}");Y.push("#bdime_tools_on .pt_b_default{background-position:-81px -54px}");Y.push("#bdime_tools_on .pt_b_hover{background-position:-81px -81px}");Y.push("#bdime_tools_off{width:38px;height:26px;display:none;position:absolute;right:0}");Y.push("#bdime_tools_off span{width:29px;height:26px;display:inline-block;background:url(http://www.baidu.com/olime/ime_bg.gif) 0 -108px;cursor:pointer}");Y.push("#bdime_tools_off .off_logo_default{background-position:-52px -108px}");Y.push("#bdime_tools_off .off_logo_hover{background-position:-9px -108px}");Y.push("span#bdime_tools_off_drag{width:9px;cursor:move}");Y.push("#bdime_panel{position:absolute;z-index:99999;display:none}");Y.push("#bdime_panel table{width:350px;border:0}");Y.push("#bdime_panel td{font:14px arial;color:#000;height:59px;text-align:left;vertical-align:top;white-space:nowrap;-moz-user-select:none}");Y.push(".panel_l{width:14px;background:url(http://www.baidu.com/olime/ime_bg.gif) no-repeat 0 -135px}");Y.push(".panel_c{background:url(http://www.baidu.com/olime/ime_bg.gif) repeat-x 0 -195px}");Y.push(".panel_r{width:38px;background:url(http://www.baidu.com/olime/ime_bg.gif) no-repeat right -135px}");Y.push(".panel_m{height:24px;cursor:move}");Y.push(".panel_l div{width:14px}");Y.push(".panel_r div{width:38px}");Y.push(".panel_c a{font-size:12px;color:#366F9B;position:absolute;right:38px;top:7px;text-decoration:underline}");Y.push("#bdime_cursor{width:1px;height:16px;background:#EB4F04;overflow:hidden}");Y.push("#bdime_input_holder{font:bold 16px/24px arial;color:#369;padding-right:100px}");Y.push("#bdime_input span{display:inline-block}");Y.push("#bdime_selector{font:32px 'simsun';padding-top:1px;cursor:default}");Y.push("#bdime_selector span{cursor:pointer}");Y.push(".bdime_selected{color:#eb4f03}");Y.push(".bdime_page{width:9px;height:9px;overflow:hidden;position:absolute;top:38px;background:url(http://www.baidu.com/olime/ime_bg.gif)}");Y.push(".bdime_sel_pre_on{right:27px;background-position:-85px -110px;cursor:pointer}");Y.push(".bdime_sel_pre_off{right:27px;background-position:-104px -173px}");Y.push(".bdime_sel_nxt_on{right:12px;background-position:-96px -110px;cursor:pointer}");Y.push(".bdime_sel_nxt_off{right:12px;background-position:-119px -173px}");Y.push("#bdime_msg_off{width:125px;left:60px;top:-50px}");Y.push("#bdime_msg_off p{text-align:left}");Y.push("#bdime_msg_on{width:118px;right:-40px;top:-32px}");Y.push("#bdime_msg_ch{width:120px;right:32px;top:-32px}");Y.push("#bdime_msg_bc{width:150px;right:-10px;top:-32px}");Y.push("#bdime_msg_pt{width:135px;right:-28px;top:-32px}");Y.push(".bdime_msg{font:12px arial;position:absolute;z-index:99999;display:none}");Y.push(".bdime_msg p{border:1px solid #a1c2f2;background:#dbe9f9;margin:0;padding:3px 6px;line-height:18px;text-align:center}");Y.push(".bdime_msg div{height:7px;overflow:hidden;background:url(http://www.baidu.com/olime/ime_bg.gif) center -256px;position:relative;top:-1px}");Y.push(".bdime_msg b{width:2px;height:2px;float:left;overflow:hidden;background:url(http://www.baidu.com/olime/ime_bg.gif) -85px -121px}");Y.push(".bdime_msg .r1{_margin-right:-2px}");Y.push(".bdime_msg .r2{float:right;background-position:-87px -121px}");Y.push(".bdime_msg .r3{background-position:-85px -123px;margin-top:-2px}");Y.push(".bdime_msg .r4{float:right;background-position:-87px -123px;margin-top:-2px}");Y.push("#bdime_menu{width:105px;height:54px;margin:0;padding:7px 0 0;list-style:none;position:absolute;z-index:99999;left:0;top:-61px;background:url(http://www.baidu.com/olime/ime_bg.gif) no-repeat 0 -265px;display:none}");Y.push("#bdime_menu li a{width:101px;height:25px;line-height:25px;color:#000;display:block;text-decoration:none;text-align:left;text-indent:20px;margin:0 auto}");Y.push("#bdime_menu li a:hover{color:#fff;background:#457cd8}");U(Y.join(""))}function W(){var a=L("bdime_tools")?L("bdime_tools"):O("DIV");a.id="bdime_tools";var Z='<div id="bdime_tools_off"><div><div id="bdime_msg_on" class="bdime_msg"><b class="r1"></b><b class="r2"></b><p>\u5f00\u542f\u5728\u7ebf\u8f93\u5165\u6cd5</p><b class="r3"></b><b class="r4"></b><div></div></div></div><span id="bdime_tools_off_drag"></span><span id="bdime_tools_off_logo" class="off_logo_default"></span></div><div id="bdime_tools_on"><div><ul id="bdime_menu"><li><a href="http://tieba.baidu.com/f?kw=%E7%99%BE%E5%BA%A6%E5%9C%A8%E7%BA%BF%E8%BE%93%E5%85%A5%E6%B3%95&ie=utf-8" class="bdime_link" target="_blank">\u53cd\u9988\u5efa\u8bae</a></li><li><a href="http://www.baidu.com/search/ime/help.html#n2" class="bdime_link" target="_blank">\u5e2e\u52a9</a></li></ul><div id="bdime_msg_ch" class="bdime_msg"><b class="r1"></b><b class="r2"></b><p>\u5207\u6362\u4e2d/\u82f1\u6587(Shift)</p><b class="r3"></b><b class="r4"></b><div></div></div><div id="bdime_msg_bc" class="bdime_msg"><b class="r1"></b><b class="r2"></b><p>\u5168/\u534a\u89d2(Shift + Space)</p><b class="r3"></b><b class="r4"></b><div></div></div><div id="bdime_msg_pt" class="bdime_msg"><b class="r1"></b><b class="r2"></b><p>\u4e2d/\u82f1\u6587\u6807\u70b9(Ctrl + .)</p><b class="r3"></b><b class="r4"></b><div></div></div><div id="bdime_msg_off" class="bdime_msg"><b class="r1"></b><b class="r2"></b><p>\u70b9\u51fb\u201c\u5173\u95ed\u201d\uff0c\u5728\u7ebf\u8f93\u5165\u6cd5\u6682\u505c\u4f7f\u7528\u3002</p><b class="r3"></b><b class="r4"></b><div></div></div></div><span id="bdime_tools_drag"></span><span id="bdime_tools_ch" class="ch_a_default"></span><span id="bdime_tools_bc" class="bc_b_default"></span><span id="bdime_tools_pt" class="pt_a_default"></span><span id="bdime_tools_close" class="close_default"></span></div>';a.innerHTML=Z;document.body.appendChild(a);var Y=L("bdime_panel")?L("bdime_panel"):O("DIV");Y.id="bdime_panel";var Z='<table cellpadding="0" cellspacing="0" onselectstart="return false;"><tr><td class="panel_l"><div class="panel_m"></div></td><td class="panel_c">'+H.feedbackLink+'<div id="bdime_input_holder" class="panel_m"><span id="bdime_input"></span></div><div id="bdime_selector"></div></td><td class="panel_r"><div class="panel_m"></div><span id="bdime_sel_pre" class="bdime_page bdime_sel_pre_off"></span><span id="bdime_sel_nxt" class="bdime_page bdime_sel_nxt_off"></span></td></tr></table>';Y.innerHTML=Z;document.body.appendChild(Y);L("bdime_input").innerHTML=H.cursorHtml}function G(){var c=L("bdime_tools");var d=c.getElementsByTagName("*");var Y=L("bdime_panel");var Z=Y.getElementsByTagName("*");c.setAttribute("unselectable","on");Y.setAttribute("unselectable","on");for(var a=0;a<d.length;a++){d[a].setAttribute("unselectable","on")}for(var a=0;a<Z.length;a++){Z[a].setAttribute("unselectable","on")}}function V(){C();W();G();H.tools=L("bdime_tools");H.tools_on=L("bdime_tools_on");H.tools_drag=L("bdime_tools_drag");H.tools_ch=L("bdime_tools_ch");H.tools_bc=L("bdime_tools_bc");H.tools_pt=L("bdime_tools_pt");H.tools_close=L("bdime_tools_close");H.tools_off=L("bdime_tools_off");H.tools_off_drag=L("bdime_tools_off_drag");H.tools_off_logo=L("bdime_tools_off_logo");H.panel=L("bdime_panel");H.panel_pre=L("bdime_sel_pre");H.panel_nxt=L("bdime_sel_nxt");H.panel_input=L("bdime_input");H.panel_selector=L("bdime_selector");H.bdime_msg_on=L("bdime_msg_on");H.bdime_msg_ch=L("bdime_msg_ch");H.bdime_msg_bc=L("bdime_msg_bc");H.bdime_msg_pt=L("bdime_msg_pt");H.bdime_msg_off=L("bdime_msg_off");H.bdime_menu=L("bdime_menu")}return{init:V}})();H.toolbar=(function(){var W=false;function e(){var m=H.tools;var h=document.documentElement,j=document.body;var i=H.isStrict?h.clientHeight:j.clientHeight;var n=H.isStrict?h.clientWidth:j.clientWidth;var l=n-m.offsetWidth-H.option.tRight;var k=i-m.offsetHeight-H.option.tBottom;if(H.isIE==6){m.style.position="absolute";m.style.setExpression("left","eval((document.documentElement.scrollLeft || document.body.scrollLeft) + "+l+") + 'px'");m.style.setExpression("top","eval((document.documentElement.scrollTop || document.body.scrollTop) + "+k+") + 'px'")}else{m.style.position="fixed";m.style.left=l+"px";m.style.top=k+"px"}}function a(){var h=H.tools;if(h.style.display!="block"){P(h)}e();D(h)}function Y(){if(H.domain&&navigator.cookieEnabled&&/\bbdime=(\d+)(;|$)/i.test(document.cookie)){var h=RegExp.$1;H.status.enable=parseInt(h.substr(0,1));if(h.length==5){H.status.ch=parseInt(h.substr(1,1));H.status.bc=parseInt(h.substr(2,1));H.status.pt=parseInt(h.substr(3,1));H.status.on=parseInt(h.substr(4,1))}}d()}function d(){var i=H.toolbar;var h=H.tools_ch;if(H.status.ch){i.setModeOn(h)}else{i.setModeOff(h)}var k=H.tools_bc;if(H.status.bc){i.setModeOn(k)}else{i.setModeOff(k)}var j=H.tools_pt;if(H.status.pt){i.setModeOn(j)}else{i.setModeOff(j)}}function f(){P(H.tools);H.toolbar.isShow=true}function Z(){if(H.isBlur){D(H.tools);H.inputpanel.hide();H.toolbar.isShow=false}}function G(){setTimeout(function(){P(H.tools_on);D(H.tools_off);P(H.bdime_msg_off);D(H.bdime_msg_off)},10)}function c(){P(H.bdime_msg_on);D(H.bdime_msg_on);D(H.bdime_menu);D(H.tools_on);P(H.tools_off)}function X(h){h.className=h.className.replace(/_default/,"_hover")}function V(h){h.className=h.className.replace(/_hover/,"_default")}function U(h){h.className=h.className.replace(/_b_/,"_a_")}function C(h){h.className=h.className.replace(/_a_/,"_b_")}function g(){a();Y();Q(window,"scroll",e);var l=H.tools_off_logo;Q(l,"mouseover",function(){X(l);P(H.bdime_msg_on)});Q(l,"mouseout",function(){V(l);D(H.bdime_msg_on)});Q(l,"click",function(){P(H.bdime_msg_off)});var k=H.tools_close;Q(k,"mouseover",function(){X(k);P(H.bdime_msg_off)});Q(k,"mouseout",function(){V(k);D(H.bdime_msg_off)});Q(k,"click",function(){X(l);P(H.bdime_msg_on);D(H.bdime_menu)});var h=H.tools_ch;Q(h,"mouseover",function(){X(h);P(H.bdime_msg_ch)});Q(h,"mouseout",function(){V(h);D(H.bdime_msg_ch)});var j=H.tools_bc;Q(j,"mouseover",function(){X(j);P(H.bdime_msg_bc)});Q(j,"mouseout",function(){V(j);D(H.bdime_msg_bc)});var i=H.tools_pt;Q(i,"mouseover",function(){X(i);P(H.bdime_msg_pt)});Q(i,"mouseout",function(){V(i);D(H.bdime_msg_pt)});Q(H.tools_on,"contextmenu",function(n){var m=n.target||n.srcElement;if(m.id!="bdime_tools_close"){P(H.bdime_menu)}window.event?n.returnValue=false:n.preventDefault()})}return{show:f,hide:Z,toolsOnShow:G,toolsOnHide:c,setModeOn:U,setModeOff:C,setPosition:e,resetStatus:d,isShow:W,init:g}})();H.inputpanel=(function(){var Z=false;function f(){var k=L("bdime_temp");if(k){document.body.removeChild(k)}}function W(l){f();var r=l.ownerDocument.defaultView;var p=T(l,r);var m=O("div");m.id="bdime_temp";m.style.width=l.clientWidth-1+"px";m.style.height=l.clientHeight+"px";m.style.visibility="hidden";m.style.position="absolute";m.style.wordWrap="break-word";m.style.textAlign="left";m.style.left=p.x+"px";m.style.top=p.y+"px";document.body.appendChild(m);var n=l.value;var o=n.substring(0,l.selectionStart);m.innerHTML=J(o);var q=L("bdime_cursor_temp");if(q){m.removeChild(q)}else{q=O("span");q.id="bdime_cursor_temp";q.innerHTML="&nbsp;";m.appendChild(q)}var t=["font","fontFamily","fontSize","fontWeight","fontVariant","fontStyle","letterSpacing","wordSpacing","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","borderWidth","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","overflowX","overflowY"];for(var k=0;k<t.length;k++){var s=F(l,t[k]);if(s){E(m,t[k],s)}}return q}function i(m){var k=0,o=0;var l=m.ownerDocument.selection.createRange();if(m.tp=="text"){var n=T(m);k=n.x+l.offsetLeft+10;o=l.boundingTop+l.boundingHeight}else{var n=T(m);k=l.offsetLeft+10;o=l.offsetTop+10}return{x:k,y:o}}function j(l){var k;if(H.isIE){k=l.ownerDocument.parentWindow}else{k=l.ownerDocument.defaultView}return k}function X(p){var m=0,r=0;var l=a(p);var o=j(p);var q=T(p,o);m+=q.x;r+=q.y;var k=o.document.documentElement;var n=o.document.body;m-=k.scrollLeft||n.scrollLeft;r-=k.scrollTop||n.scrollTop;return{x:m,y:r}}function a(k){if(document.documentMode==9){b=k.ownerDocument.body.innerHTML!=window.document.body.innerHTML}else{b=k.ownerDocument!=window.document}return b}function e(p){var m=0,r=0;var q;var l=a(p);while(l){var o=j(p);q=T(p,o);p=o.frameElement;m+=q.x;r+=q.y;var k=o.document.documentElement;var n=o.document.body;m-=k.scrollLeft||n.scrollLeft;r-=k.scrollTop||n.scrollTop;l=a(p)}q=T(p);m+=q.x;r+=q.y;return{x:m,y:r}}function V(k){return{x:e(k).x-X(k).x,y:e(k).y-X(k).y}}function d(k){return{x:k.document.documentElement.scrollLeft||k.document.body.scrollLeft,y:k.document.documentElement.scrollTop||k.document.body.scrollTop}}function h(){var AD=H.iptCurTarget;if(!(AD||Z)){return }var l=0,t=0;var o;if(AD.tp=="textarea"){var k=V(AD);if(H.isIE){o=i(AD);if(document.documentMode>=8){l=o.x}else{l=k.x+o.x}t=k.y+o.y+5}else{var r=W(AD);var x=d(AD.ownerDocument.defaultView);var u=r.offsetHeight;o=T(r);l=k.x+o.x-x.x-AD.scrollLeft+10;t=k.y+o.y-x.y+u-AD.scrollTop}}else{if(AD.tp=="iframe"||AD.tp=="div"){var AA=20,y=40;if(AD.tp=="div"){AA=10;y=20}var k=V(AD);if(H.isIE){var n=AD.ownerDocument.parentWindow;var x=d(n);var q="<span id='bdime_cursor_temp'>&nbsp;</span>";if(AD.contentWindow){var AE=AD.contentWindow.document}else{var AE=AD.ownerDocument}var s=AE.selection.createRange();s.collapse();s.pasteHTML(q);s=null;var AB;if(AD.tp=="iframe"){AB=AD.contentWindow.document}else{AB=AD.ownerDocument}var v=AB.getElementById("bdime_cursor_temp");o=T(v,n);v.parentNode.removeChild(v);v=null}else{var n=AD.ownerDocument.defaultView;var x=d(n);var p;if(AD.tp=="iframe"){p=AD.contentWindow}else{p=n}var v=p.document.createElement("span");var s=p.getSelection().getRangeAt(0);v.id="bdime_cursor_temp";try{s.insertNode(v);o=T(v,p);v.parentNode.removeChild(v)}catch(z){o=e(AD)}s=null;v=null}if(AD.tp=="iframe"){var p=AD.contentWindow;if(!a(AD)){l=e(AD).x+o.x+10;t=e(AD).y+o.y+10;if(H.isIE){t-=d(window).y}}else{l=k.x+o.x-d(p).x-x.x+AA;t=k.y+o.y-d(p).y-x.y+y}if(H.isIE){t+=10}}else{l=k.x+o.x-x.x+AA;t=k.y+o.y-x.y+y}}else{var o=e(AD);l=o.x+20;t=o.y+AD.offsetHeight}}var AC=document.body.offsetHeight;var m=AD.offsetHeight;if(AC>t&&t+H.option.panelH>AC){t=t-H.option.panelH-m}H.panel.style.left=l+"px";H.panel.style.top=t+"px"}function g(){P(H.panel);H.inputpanel.isShow=true;h(H.iptCurTarget);H.panelShow()}function c(){D(H.panel);H.inputpanel.isShow=false;f();H.inputsource="";H.inputselected="";H.pageTimes=0;H.isSubAddr=false;H.panel_input.innerHTML=H.cursorHtml;H.panel_selector.innerHTML="";H.curSelectNum=1;H.data.resetGroup();H.panelHide()}function G(){if(!H.data.db.data){return false}C();Y();U();if(H.needIptBack){H.control.setInput()}M(document,"mouseup",H.control.stopAutoPage);Q(document,"mouseup",H.control.stopAutoPage)}function C(){var m="";var o=(H.data.db.curpage-1)*H.shownum;var n=o+H.shownum;if(n>H.data.db.totalnum){n=H.data.db.totalnum}for(var l=o;l<n;l++){var k=l-o+1;m+="<span id='bdime_selector_"+k+"'";if(k==1){m+=" class='bdime_selected'"}m+=" onclick='bdime.control.clkSelResult(this)' sn='"+H.data.db.data[l][1]+"' unselectable='on'>"+k+"."+H.data.db.data[l][0]+"</span>&nbsp;&nbsp;"}H.panel_selector.innerHTML=m;H.selectLock=false}function Y(){var k=H.panel_pre;if(H.data.db.curpage>1){k.className="bdime_page bdime_sel_pre_on";M(k,"mousedown",H.control.autoPagePre);Q(k,"mousedown",H.control.autoPagePre)}else{k.className="bdime_page bdime_sel_pre_off";M(k,"mousedown",H.control.autoPagePre)}}function U(){var k=H.panel_nxt;if(H.data.db.totalpage>1&&H.data.db.curpage<H.data.db.totalpage){k.className="bdime_page bdime_sel_nxt_on";M(k,"mousedown",H.control.autoPageNxt);Q(k,"mousedown",H.control.autoPageNxt)}else{k.className="bdime_page bdime_sel_nxt_off";M(k,"mousedown",H.control.autoPageNxt)}}return{setPosition:h,isShow:Z,show:g,hide:c,setResults:G}})();H.control=(function(){function i(){if(!H.domain){return }if(navigator.cookieEnabled){var AB=new Date();AB.setTime(AB.getTime()+365*24*3600*1000);var AA=H.status.enable+""+H.status.ch+""+H.status.bc+""+H.status.pt+""+H.status.on;document.cookie="bdime="+AA+";domain="+H.domain+";path=/;expires="+AB.toGMTString()}}function t(AA){H.status.on=1;H.toolbar.toolsOnShow();H.keywatcher.on();H.inputwatcher.on();if(AA){U(null,true);i()}}function c(AA){H.status.on=0;H.toolbar.toolsOnHide();H.inputpanel.hide();H.keywatcher.off();H.inputwatcher.off();Z(null,true);if(AA){i()}}function j(){H.isClose=false;H.status.enable=2;H.status.ch=1;H.status.bc=1;H.status.pt=1;H.toolbar.resetStatus();t(1);H.runner.startAutoFocus()}function d(){H.status.enable=0;c(1);H.isClose=true;H.toolbar.hide();H.runner.stopAutoFocus()}function r(AA){if(AA&&(AA.tp=="input"||AA.tp=="textarea")){return true}return false}function Z(AE,AB){var AA=[];if(AB){AA=H.iptTargets}else{AA.push(AE)}for(var AC=0;AC<AA.length;AC++){var AD=AA[AC];if(AD.tp=="input"||AD.tp=="textarea"){if(AD==H.iptCurTarget){AD.blur()}AD.style.imeMode="auto";if(H.hasSug){AD.setAttribute("autocomplete","off")}else{AD.setAttribute("autocomplete","on")}if(AD==H.iptCurTarget){AD.focus()}}}}function U(AF,AB){var AA=[];if(AB){AA=H.iptTargets}else{AA.push(AF)}for(var AD=0;AD<AA.length;AD++){var AE=AA[AD];if(AE.tp=="input"||AE.tp=="textarea"){var AC=false;if(AE==document.activeElement){AC=true}if(AC){AE.blur()}AE.style.imeMode="disabled";AE.setAttribute("autocomplete","off");if(AC){AE.focus()}}}}function v(){var AB=H.tools_ch;var AA=H.tools_pt;H.control.enterInput();if(H.status.ch){H.status.ch=0;H.status.pt=0;H.toolbar.setModeOff(AB);H.toolbar.setModeOff(AA);H.inputpanel.hide()}else{H.status.ch=1;H.status.pt=1;H.toolbar.setModeOn(AB);H.toolbar.setModeOn(AA)}i()}function l(){var AA=H.tools_bc;if(H.status.bc){H.status.bc=0;H.toolbar.setModeOff(AA)}else{H.status.bc=1;H.toolbar.setModeOn(AA)}i()}function G(){var AA=H.tools_pt;if(H.status.pt){H.status.pt=0;H.toolbar.setModeOff(AA)}else{H.status.pt=1;H.toolbar.setModeOn(AA)}i()}function h(){Y();H.pageT=setInterval(Y,300)}function Y(){H.data.db.curpage--;if(H.data.db.curpage<1){H.data.db.curpage=1;clearInterval(H.pageT)}H.needIptBack=false;H.inputpanel.setResults()}function W(){o();H.pageT=setInterval(o,300)}function o(){H.data.db.curpage++;var AB=H.data.db.curpage;var AA=H.data.db.totalpage;if(AB>=AA){H.data.db.curpage=AA;clearInterval(H.pageT)}if(H.data.db.enableGetData&&AB==AA-1){H.data.param.rn+=H.data.param.pn;H.tempsource="";H.xpc.send();H.needIptBack=false}else{H.needIptBack=false;H.inputpanel.setResults()}}function n(){clearInterval(H.pageT)}function X(AD){var AB="";var AC=H.inputselected;for(var AA=0;AA<AC.length;AA++){AB+="<span class='bdime_ch'>"+AC.charAt(AA)+"</span>"}for(var AA=0;AA<AD.length;AA++){AB+="<span class='bdime_en'>"+AD.charAt(AA)+"</span>"}AB+=H.cursorHtml;return AB}function g(AA){return AA.replace(/<\/?[^>]+>/gi,"")}function q(){var AB=H.panel_selector.getElementsByTagName("span");for(var AA=0;AA<AB.length;AA++){AB[AA].className=""}}function s(AA,AF){if(AF){H.inputpanel.hide()}if(/^\w+\'+/.test(H.inputsource)){AA=AA.replace(/\'/g,"");AA=u(AA)}var AD=H.iptCurTarget;if(AD.tp=="iframe"){var AH=AD.contentWindow.document;if(H.isIE){AD.contentWindow.focus();var AC=AH.selection.createRange();if(AF){AC.pasteHTML(AA);AC.collapse()}else{AC.select()}}else{AD.contentWindow.focus();if(AF){AH.execCommand("insertHTML",false,AA)}}}else{if(AD.tp=="div"&&!H.isIE){var AH=AD.ownerDocument;if(AA!=""){AH.execCommand("insertHTML",false,AA)}}if(document.selection&&!H.isOpera){AD.focus();var AH=AD.ownerDocument;var AC=AH.selection.createRange();if(AF){AC.text=AA;AC.collapse()}AC.select()}else{if(AD.selectionStart||AD.selectionStart>-1){AD.focus();var AG=AD.scrollTop;var AE=AD.selectionStart;var AB=AD.selectionEnd;if(AF){var AI=AD.value;AD.value=AI.substring(0,AE)+AA+AI.substring(AB,AI.length);AD.selectionStart=AE+AA.length;AD.selectionEnd=AE+AA.length}AD.scrollTop=AG}else{AD.focus();AD.value+=AA}}}}function u(AA){return AA.replace(/^\d\./,"")}function x(){if(H.needIptBack){setTimeout(function(){var AA=H.data.db.inputback;if(AA!=""){H.data.db.inputback=""}H.panel_input.innerHTML=X(AA)},5)}else{H.panel_input.innerHTML=X(H.inputsource)}}function y(AD){H.pageTimes=0;H.isSubAddr=false;if(H.selectLock){return }H.selectLock=true;var AA=AD.getAttribute("sn");var AF="";if(AA>0){AF=g(AD.innerHTML);AF=u(AF);H.inputselected+=AF}var AC=H.inputsource.replace(/\'/g,"");H.data.group.count++;if(AA<AC.length){var AH=AC.substr(0,AA);H.data.group.en.push(AH);H.data.group.ch.push(AF);var AB=AC.substr(AA,AC.length-1);H.inputsource=AB;H.data.restData();H.needIptBack=true}else{H.data.group.en.push(H.inputsource);H.data.group.ch.push(AF);if(H.keywatcher.checkSpecialStr(".")){H.data.group.count=0}if(H.data.group.count>1){H.data.setGroup(0,0)}else{var AE=AD.id;var AG=AE.substr(AE.length-1,1);H.data.sendGroupLog(H.data.db.curpage,AG)}H.inputsource="";s(H.inputselected,true);H.inputselected=""}}function V(AB){var AA=L("bdime_selector_"+AB);if(AA){y(AA)}}function f(AB){if(AB=="pre"){H.curSelectNum--;if(H.data.db.curpage==1){if(H.curSelectNum==0){H.curSelectNum=1}}else{if(H.curSelectNum==0){H.curSelectNum=H.shownum;Y()}}}else{if(AB=="nxt"){H.curSelectNum++;if(H.data.db.curpage==H.data.db.totalpage){var AA=H.data.db.totalnum-(H.data.db.curpage-1)*H.shownum;if(H.curSelectNum>AA){H.curSelectNum=AA}}else{if(H.curSelectNum>H.shownum){H.curSelectNum=1;o()}}}}q();L("bdime_selector_"+H.curSelectNum).className="bdime_selected"}function p(AA){if(AA){y(AA)}}function k(){var AA=L("bdime_selector_"+H.curSelectNum);if(AA){y(AA)}}function a(){var AA=g(H.panel_input.innerHTML);if(AA!=""){H.data.group.en.push(AA);H.data.group.ch.push(AA);H.data.group.count=0;H.data.sendGroupLog(0,0);s(AA,true)}}function z(AC){H.pageTimes=0;H.isSubAddr=false;var AA=false;var AE=H.inputsource;if(!/\'$/.test(AE)){H.selectLock=true}var AD=L("bdime_cursor");var AF=AD.previousSibling;var AB=AD.nextSibling;if(AC=="left"){if(AF){if(AF.innerHTML=="'"||AF.className=="bdime_ch"){AA=true;H.selectLock=false}H.panel_input.removeChild(AF)}else{return }}else{if(AC=="right"){if(AB){if(AB.innerHTML=="'"||AB.className=="bdime_ch"){AA=true;H.selectLock=false}H.panel_input.removeChild(AB)}else{return }}}AF=null;AB=null;e();H.needIptBack=false;if(H.inputsource==""){if(H.inputselected==""){s("",true);H.inputpanel.hide()}else{AA=true;H.selectLock=false;H.data.setSpecialData()}}if(!(AA||/\'$/.test(AE))){H.data.restData()}}function w(AI,AH){H.pageTimes=0;H.isSubAddr=false;var AC=L("bdime_cursor");var AG=AC.previousSibling;var AB=AC.nextSibling;if(AB&&AB.className=="bdime_ch"){return }if(AI!="'"){H.selectLock=true}else{if(AB&&AB.className=="bdime_en"){return }}var AA=g(H.panel_input.innerHTML);if(AA.length>=80){H.selectLock=false;return }if(AH){var AE=L("bdime_selector_"+H.curSelectNum);if(AE){AI=H.inputselected+u(g(AE.innerHTML))+AI}s(AI,true)}else{if(H.status.on&&!H.inputpanel.isShow){H.inputpanel.show()}for(var AF=0;AF<AI.length;AF++){var AD=O("span");AD.innerHTML=AI.substr(AF,1);AD.className="bdime_en";H.panel_input.insertBefore(AD,AC);AD=null}e();H.needIptBack=false;if(AI!="'"){H.data.restData()}}}function e(){var AD="",AA="";var AC=H.panel_input.getElementsByTagName("span");for(var AB=0;AB<AC.length;AB++){var AE=AC[AB];if(AE.className=="bdime_ch"){AD+=AE.innerHTML}else{if(AE.className=="bdime_en"){AA+=AE.innerHTML}}}H.inputselected=AD;H.inputsource=AA}function C(AB){var AD=L("bdime_cursor");switch(AB){case"left":var AE=AD.previousSibling;if(AE){H.panel_input.insertBefore(AD,AE)}AE=null;break;case"right":var AA=AD.nextSibling;if(AA){H.panel_input.insertBefore(AA,AD)}AA=null;break;case"home":var AE=AD.previousSibling;var AC=H.panel_input.childNodes[0];if(AE&&AC){H.panel_input.insertBefore(AD,AC)}AE=null;break;case"end":var AA=AD.nextSibling;if(AA){H.panel_input.appendChild(AD)}AA=null;break}}function m(){Q(H.tools_close,"click",function(){c(1);S(0,0,0,0,0)});Q(H.tools_off_logo,"click",function(){t(1);S(0,1,0,0,0)});Q(H.tools_ch,"click",v);Q(H.tools_bc,"click",l);Q(H.tools_pt,"click",G);Q(document,"mousedown",function(AD){var AD=AD||window.event;var AC=AD.target||AD.srcElement;if(AC&&AC.className=="bdime_link"){setTimeout(function(){D(H.bdime_menu)},500)}else{D(H.bdime_menu)}if(AC!=H.iptCurTarget){H.runner.end()}});var AA=H.tools;Q(AA,"mousedown",function(){setTimeout(function(){s("",false)},10)});Q(AA,"mouseover",function(){H.isBlur=false});Q(AA,"mouseout",function(){H.isBlur=true});var AB=H.panel;Q(AB,"mousedown",function(){setTimeout(function(){s("",false)},10)});Q(AB,"mouseover",function(){H.isBlur=false});Q(AB,"mouseout",function(){H.isBlur=true});Q(window,"resize",function(){H.inputpanel.setPosition();H.toolbar.setPosition()});if(H.status.on){t(0)}else{c(0)}}return{init:m,modeCH:v,modeBC:l,modePT:G,inputLetter:w,setPagePre:Y,setPageNxt:o,autoPagePre:h,autoPageNxt:W,stopAutoPage:n,setInput:x,arrSelResult:f,numSelResult:V,clkSelResult:p,spaSelResult:k,delLetter:z,enterInput:a,toolsOff:c,openIme:j,closeIme:d,disableTargetIme:U,moveCursor:C}})();H.drag=(function(){var U=null;var W=null;var V=null;function X(g,f){var f=f||window.event;var d=T(g);var c=Y(f);return{x:c.x-d.x,y:c.y-d.y}}function Y(f){var c=document.documentElement,d=document.body;return{x:f.pageX||(f.clientX+c.scrollLeft||d.scrollLeft),y:f.pageY||(f.clientY+c.scrollTop||d.scrollTop)}}function Z(g){if(!U){return false}var g=g||window.event;var n=Y(g);var c=n.x-V.x;var k=n.y-V.y;var o=document.documentElement,p=document.body;var h=o.scrollLeft||p.scrollLeft;var m=o.scrollTop||p.scrollTop;var m=o.scrollTop||p.scrollTop;var d=o.clientWidth;var i=o.clientHeight;var j=U.offsetWidth;var f=U.offsetHeight;if(U==H.tools){j=W==H.tools_off_drag?38:140;if(c<j){c=j}if(c>h+d-50){c=h+d-50}if(H.isIE==6){if(k<m){k=m}else{if(k>m+i-f-8){k=m+i-f-8}}}else{c-=h;k-=m;if(k<0){k=0}if(k>i-f-8){k=i-f-8}}}if(U==H.panel){var l=n.x;if(l<5||l>d-5){return }if(k<m){k=m}else{if(k>m+i-f){k=m+i-f}}}U.style.left=c+"px";U.style.top=k+"px"}function a(){Q(H.tools_drag,"mousedown",function(c){U=H.tools;W=H.tools_drag;C(c)});Q(H.tools_off_drag,"mousedown",function(c){U=H.tools;W=H.tools_off_drag;C(c)});Q(H.panel,"mousedown",function(c){U=H.panel;W=H.panel;C(c)});Q(document,"mouseup",G)}function C(c){Q(document,"mousemove",Z);document.onselectstart=function(d){return false};if(H.isFirefox){document.body.style.MozUserSelect="none"}if(U.setCapture){U.setCapture()}V=X(U,c)}function G(){M(document,"mousemove",Z);document.onselectstart=null;if(H.isFirefox){document.body.style.MozUserSelect=""}if(!U){return false}if(U.releaseCapture){U.releaseCapture()}U=null}return{init:a}})();H.inputwatcher=(function(){var Y=false;var V="";var U="";var X=null;var G=null;function W(){U=H.inputsource.replace(/\'/g,"");if(V!=U){V=U;H.xpc.send()}}function C(){if(!Y){G=setInterval(W,10);Y=true}}function Z(){if(Y){clearInterval(G);Y=false}}return{on:C,off:Z}})();H.keywatcher=(function(){var g=false;var m=false;var a=false;var V=false;var d=false;var W=false;var C=true;var X=true;var i=false;var p=false;var j=false;function o(t){var t=t||window.event;var s=t.which?t.which:t.keyCode;a=t.shiftKey||(s==16);V=t.ctrlKey||(s==17);d=t.altKey||(s==18);W=t.metaKey||(s==91);i=s==16;if(V||d||W){return }g=false;if(s>=65&&s<=90){g=true}m=false;if(H.isFirefox){s=n(s)}if(H.isOpera){s=U(s);j=false}if((s>=65&&s<=90)||(s>=48&&s<=57)||(s>=96&&s<=105)||s==192||s==189||s==187||s==219||s==221||s==220||s==186||s==222||s==188||s==190||s==191||s==109||s==107||s==110||s==111||s==106||s==59||s==32){m=true}var v="";var u=false;if(m){if(!g){e(t);if(s>=48&&s<=57){if(H.inputpanel.isShow){if(a){v=H.status.pt?A[s][5]:A[s][3];u=true}else{if(H.keywatcher.checkAddr()){v=A[s][0]}else{H.control.numSelResult(String.fromCharCode(s));return false}}}else{if(a){var r=H.status.pt?5:3;if(H.status.ch){v=A[s][r]}else{v=H.status.bc?A[s][r]:A[s][4]}}else{v=H.status.bc?A[s][0]:A[s][2]}u=true}}if(s>=96&&s<=105){v=H.status.bc?A[s][0]:A[s][2];u=true}switch(s){case 32:if(a){return }if(H.inputpanel.isShow){H.control.spaSelResult();return false}else{var r=H.status.pt?2:0;v=H.status.bc?A[s][r]:A[s][1];u=true}break;case 187:if(a){var r=H.status.pt?5:3;if(H.status.ch){v=A[s][r]}else{v=H.status.bc?A[s][r]:A[s][4]}u=true}else{if(H.inputpanel.isShow){H.control.stopAutoPage();H.control.setPageNxt();return false}else{var r=H.status.pt?2:0;if(H.status.ch){v=A[s][r]}else{v=H.status.bc?A[s][r]:A[s][1]}u=true}}break;case 190:if(a){var r=H.status.pt?5:3;if(H.status.ch){v=A[s][r]}else{v=H.status.bc?A[s][r]:A[s][4]}u=true}else{if(H.inputpanel.isShow){if(h(".")){v=A[s][0]}else{H.isSubAddr=H.pageTimes>0?false:true;H.pageTimes++;H.control.stopAutoPage();H.control.setPageNxt();return false}}else{var r=H.status.pt?2:0;if(H.status.ch){v=A[s][r]}else{v=H.status.bc?A[s][r]:A[s][1]}u=true}}break;case 189:case 188:if(a){var r=H.status.pt?5:3;if(H.status.ch){v=A[s][r]}else{v=H.status.bc?A[s][r]:A[s][4]}u=true}else{if(H.inputpanel.isShow){if(s==189&&h("-")){v=A[s][0]}else{H.control.stopAutoPage();H.control.setPagePre();return false}}else{var r=H.status.pt?2:0;if(H.status.ch){v=A[s][r]}else{v=H.status.bc?A[s][r]:A[s][1]}u=true}}break;case 106:case 107:case 109:case 110:case 111:v=H.status.bc?A[s][0]:A[s][1];u=true;break;case 186:case 191:case 192:case 219:case 220:case 221:if(a){if(s==186&&h(":")){v=A[s][3];break}var r=H.status.pt?5:3;if(H.status.ch){v=A[s][r]}else{v=H.status.bc?A[s][r]:A[s][4]}}else{if(s==191&&h("/")){v=A[s][0];break}var r=H.status.pt?2:0;if(H.status.ch){v=A[s][r]}else{v=H.status.bc?A[s][r]:A[s][1]}}u=true;break;case 222:if(a){var r=X?6:7;v=H.status.pt?A[s][r]:(H.status.bc?A[s][4]:A[s][5]);if(H.status.pt){X=X?false:true}u=true}else{if(H.inputpanel.isShow){v=A[s][0]}else{var r=C?2:3;v=H.status.pt?A[s][r]:(H.status.bc?A[s][0]:A[s][1]);if(H.status.pt){C=C?false:true}u=true}}break}H.control.inputLetter(v,u)}}else{if(H.inputpanel.isShow){if(s==8){if(!H.isOpera){e(t);H.control.delLetter("left")}}if(s==13){if(H.inputpanel.isShow){p=true}e(t);H.control.enterInput()}if(s==27){e(t);H.inputpanel.hide()}if(s==33){e(t);H.control.stopAutoPage();H.control.setPagePre()}if(s==34){e(t);H.control.stopAutoPage();H.control.setPageNxt()}if(s==38){if(!H.isOpera){e(t);H.control.arrSelResult("pre")}}if(s==40){if(!H.isOpera){e(t);H.control.arrSelResult("nxt")}}if(s==37){if(!H.isOpera){e(t);H.control.moveCursor("left")}}if(s==39){if(!H.isOpera){e(t);H.control.moveCursor("right")}}if(s==36){e(t);H.control.moveCursor("home")}if(s==35){e(t);H.control.moveCursor("end")}if(s==46){if(H.isOpera){j=true}else{e(t);H.control.delLetter("right")}}}}}function h(t){var r=false;var s=H.inputsource;if(H.inputpanel.isShow){switch(t){case"-":case".":r=/^(((https?|ftp)\:\/{2}[a-z0-9])|w{3})|\./i.test(s);break;case":":r=/^(https?|ftp)(?!\:)/i.test(s);break;case"/":r=/^(https?|ftp)\:\/?/i.test(s);break}}return r}function l(){return/(((https?|ftp)\:)|w{3}\.|\.)/i.test(H.inputsource)}function k(s){var s=s||window.event;var r=s.which?s.which:s.keyCode;if(a&&r==32){H.control.modeBC();i=false}if(i&&r==16&&!(s.ctrlKey||s.altKey)){H.control.modeCH()}if((V&&a)||(d&&a)||(V&&r==32)){H.control.toolsOff(1);S(0,0,0,0,0)}if(V&&r==190){H.control.modePT()}}function Y(s){var s=s||window.event;var r=s.which?s.which:s.keyCode;var u="";var t=false;if(g&&!(V||d||W)){if((r>=97&&r<=122)){if(H.status.ch){u=A[r-32][0];if(H.isSubAddr&&H.inputsource!=""){if(!/\'$/.test(H.inputsource)){u="."+u}H.isSubAddr=false}}else{u=H.status.bc?A[r-32][0]:A[r-32][1];t=true}}else{u=H.status.bc?A[r][3]:A[r][4];t=true}e(s);H.control.inputLetter(u,t)}if(H.isOpera){if(m&&!g){e(s)}if(p&&r==13){p=false;e(s)}if(H.inputpanel.isShow){if(r==8){e(s);H.control.delLetter("left")}if(r==38){e(s);H.control.arrSelResult("pre")}if(r==40){e(s);H.control.arrSelResult("nxt")}if(r==37){e(s);H.control.moveCursor("left")}if(r==39){e(s);H.control.moveCursor("right")}if(r==46&&j){e(s);H.control.delLetter("right")}}}}function n(s){var r=s;if(s==59){r=186}else{if(s==107){r=187}else{if(s==109){r=189}}}return r}function U(s){var r=s;if(s==42){r=106}else{if(s==43){r=107}else{if(s==45){r=109}else{if(s==59){r=186}else{if(s==61){r=187}else{if(s==109){r=189}}}}}}return r}function e(r){H.isIE?r.returnValue=false:r.preventDefault()}function Z(r){M(r,"keydown",o);M(r,"keyup",k);M(r,"keypress",Y)}function f(r){Q(r,"keydown",H.keywatcher.keydownhandler);Q(r,"keyup",H.keywatcher.keyuphandler);Q(r,"keypress",H.keywatcher.keypresshandler)}function G(r){if(r.contentDocument&&!H.isIE){r=r.contentWindow}else{if(r.contentWindow.document){r=r.contentWindow.document}}return r}function c(){q();var r=H.iptCurTarget;if(r){if(r.tp=="iframe"){r=G(r)}f(r)}}function q(){var r=H.iptCurTarget;if(r){if(r.tp=="iframe"){r=G(r)}Z(r)}}return{on:c,off:q,keydownhandler:o,keypresshandler:Y,keyuphandler:k,addKeyEvent:f,rmKeyEvent:Z,checkAddr:l,checkSpecialStr:h}})();H.data=(function(){var G="http://olime.baidu.com/py";var e="http://olime.baidu.com/userlog";var Y={py:"",rn:0,pn:(4*H.shownum),ol:1,prd:document.domain};var k={totalnum:0,totalpage:1,curpage:1,data:[],enableGetData:true,inputback:""};var a={count:0,en:[],ch:[]};var h=[];var U=[];function l(){a.count=0;a.en=[];a.ch=[]}function f(t,o){var n=H.data.group.en.join("");n=n.replace(/\'/g,"");var m=H.data.group.ch.join("");var r=n.length;var q=[n,m,r];var u=h.length;var s=false;if(u>=20){h.shift()}if(u==0){h.push(q)}else{for(var p=0;p<h.length;p++){if(h[p][0]==q[0]){h[p][1]=q[1];s=true;break}}if(!s){h.push(q)}}c(t,o)}function c(u,q){var n=H.data.group.en.join(",");n=n.replace(/\'/g,"");var m=H.data.group.ch;var t=H.data.group.count;var p="bdime_group_log";var r="";if(H.iptCurTarget.tp=="input"){r=H.iptCurTarget.value}if(L(p)){document.body.removeChild(L(p))}var o=e+"?py="+encodeURIComponent(n)+"&res="+encodeURIComponent(m)+"&context="+encodeURIComponent(r)+"&n="+t+"&pg="+u+"&no="+q+"&prd="+document.domain+"&t="+(new Date()).getTime();var v=O("SCRIPT");v.setAttribute("id",p);v.src=o;document.body.appendChild(v)}function g(m){if(m==""){return""}for(var n=0;n<h.length;n++){if(h[n][0]==m){return[h[n][1],h[n][2]]}}}function X(p){var m=[];for(var o in p){m.push(o+"="+encodeURIComponent(p[o]))}var n=G+"?"+m.join("&");if(H.usr){n+="&usr="+encodeURIComponent(H.usr)}return n+"&t="+(new Date()).getTime()}function W(r){if(!r){return false}if(!r[0]){r[0]=[];r[1]=""}if(r[0].length==0){k.enableGetData=false;if(k.totalnum==0){r[0].push([H.inputsource,H.inputsource.length]);r[1]=H.inputsource}}if(H.keywatcher.checkAddr()){r[0].length=1}var q=H.inputsource;var p=r[1];q=q.replace(/\'/g,"");p=p.replace(/\'/g,"");if(p!=q){return }if(!k.data[0]){U=[];r[0]=i(r[0]);var s=g(q);if(s){var o=r[0];if(!o){o.unshift(s)}else{var t=-1;for(var m=0;m<o.length;m++){if(o[m][0]==s[0]){t=m;break}}if(t>=0){o.splice(m,1)}o.unshift(s)}r[0]=o}}k.totalnum+=r[0].length;k.totalpage=Math.ceil(k.totalnum/H.shownum);k.data=k.data.concat(r[0]);k.inputback=r[1];H.inputpanel.setResults()}function j(){k.curpage=1;k.totalnum=1;k.totalpage=1;k.data=[[H.inputselected,0],""];H.inputpanel.setResults()}function i(m){for(var n=0;n<m.length;n++){if(!C(m[n])){U.push(m[n])}}return U}function C(n){for(var m=0;m<U.length;m++){if(U[m][0]==n[0]){return true}}return false}function Z(){Y.rn=0;k.totalnum=0;k.totalpage=1;k.curpage=1;k.data=[];k.enableGetData=true;H.curSelectNum=1}function d(){var m=H.inputsource.replace(/\'/g,"");if(H.tempsource==m){return }else{H.tempsource=m}var n=H.inputsource;n=n.replace(/(\')+/g,"$1");if(H.inputselected!=""){n=n.replace(/\'/g,"")}n=n.replace(/\'$/g,"");Y.py=n;if(Y.py!=""){return X(Y)}else{return""}}function V(n){var m=(new Function("return "+n))();H.data.setData(m)}return{getData:d,setData:W,restData:Z,setTempData:V,setSpecialData:j,db:k,param:Y,group:a,setGroup:f,resetGroup:l,sendGroupLog:c}})();var K=R.create();K.prototype={initialize:function(){this.swfUrl="http://www.baidu.com/olime/ime.swf";try{if(/(\d+\.\d)/.test(external.max_version)){this.swfUrl+="?t="+new Date().getTime()}}catch(C){}if(window.postMessage){this.url="http://olime.baidu.com/bdime.html";this.guid="bdime_py";this.domain=this.getDomain();this.initFrame()}else{this.supportFlash=I();if(this.supportFlash){this.swf=null;this.initFlash()}else{this.ready()}}},getDomain:function(){var C=O("A");C.href=this.url;var G=C.protocol.replace(":","")+"://"+C.hostname.replace(/\:\d+/,"")+(C.port==""||C.port==0||(parseInt(C.port)==80)?"":":"+C.port);return G},initFrame:function(){if(document.body){this.win=this.createIframe(this.url,this,this.init)}else{var C=this;Q(window,"load",function(){C.win=C.createIframe(C.url,C,C.init)})}},initFlash:function(){var U=document.createElement("div");document.body.appendChild(U);U.style.position="absolute";U.style.bottom=0;U.innerHTML='<object width="1" height="1" id="IME_flash" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"><param value="'+this.swfUrl+'" name="movie"><param name="allowScriptAccess" value="always"><embed width="1" height="1" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" name="IME_flash"  allowScriptAccess="always" src="'+this.swfUrl+'"></object>';var C=this;var G=setInterval(function(){var V=document.IME_flash||L("IME_flash");if(V&&V.flashReady&&V.flashReady()){C.swf=V;C.ready();clearInterval(G)}},10)},createIframe:function(C,U,G){ifr=O("IFRAME");ifr.src=C+"?prd="+document.domain;ifr.id=U.guid;ifr.name=U.guid;ifr.style.display="none";document.body.appendChild(ifr);Q(ifr,"load",function(){G.call(U)});return ifr.contentWindow},init:function(G){var C=this;if(window.postMessage){Q(window,"message",function(U){C.onMessage(U)})}C.ready()},ready:function(){var C="bdime_xpc_loaded";this.send(C)},send:function(V){var C=V?V:H.data.getData();if(!C){return }if(window.postMessage){this.win.postMessage(C,this.domain)}else{if(V=="bdime_xpc_loaded"){H.runner.begin()}else{if(this.supportFlash){this.swf.abortAll();this.swf.getURL(C,"","bdime.data.setTempData")}else{var G="bdime_data_script";if(L(G)){document.body.removeChild(L(G))}var U=document.createElement("SCRIPT");U.setAttribute("id",G);U.src=C+"&cb=bdime.data.setData";document.body.appendChild(U)}}}},onMessage:function(G){G=G||window.event;if(G.origin==this.domain){var C=G.data;if(G.data=="bdime_xpc_loaded"){H.runner.begin()}else{H.data.setTempData(G.data)}}}};H.runner=(function(){var g=null,j=null;function X(m){if(H.isClose){return }var m=m||window.event;var l=m.target||m.srcElement;if(typeof (l.tagName)=="undefined"){H.iptCurTarget=l.frameElement}else{H.iptCurTarget=l}if(H.isIE&&l.tp=="iframe"){l=l.contentWindow.document}if(H.status.on){H.keywatcher.rmKeyEvent(l);H.keywatcher.addKeyEvent(l)}H.toolbar.show()}function Y(m){if(H.isClose){return }var m=m||window.event;var l=m.target||m.srcElement;if(H.isIE&&l.tp=="iframe"){l=l.contentWindow.document}H.keywatcher.rmKeyEvent(l);H.toolbar.hide()}function e(m){if(H.inputs.length>0){var l=H.inputs;for(var n=0;n<l.length;n++){var o;if(typeof l[n]=="string"){o=L(l[n])}else{if(typeof l[n]=="object"){o=l[n]}else{break}}if(o&&o.tagName&&o.tagName.toLowerCase()=="input"&&(o.type=="text"||o.type=="search")&&c(o)){C(o,"input")}else{if(o&&o.tagName&&o.tagName.toLowerCase()=="textarea"&&c(o)){C(o,"textarea")}else{if(o&&o.tagName&&o.tagName.toLowerCase()=="div"&&o.contentEditable.toString()=="true"&&typeof (o.ex)=="undefined"){C(o,"div")}else{if(o&&o.tagName&&o.tagName.toLowerCase()=="iframe"&&typeof (o.ex)=="undefined"){setTimeout(function(){try{var r,q;if(o.contentDocument&&!H.isIE){r=o.contentDocument;q=o.contentWindow}else{if(o.contentWindow.document){r=o.contentWindow.document;q=o}}if(r){if(r.designMode.toLowerCase()=="on"||r.body.contentEditable.toString()=="true"){H.iptTargets.push(o);o.tp="iframe";o.ex=true;Q(q,"focus",X);Q(q,"blur",Y)}}}catch(p){}},10)}}}}}}else{V(m);if(H.isIE){Q(m,"activate",function(){V(m)})}else{Q(m,"DOMNodeInserted",function(){V(m)})}}}function C(m,l){H.iptTargets.push(m);m.tp=l;m.ex=true;if(H.status.on){H.control.disableTargetIme(m,false)}Q(m,"focus",X);Q(m,"blur",Y)}function V(l){if(H.isClose){return }g=setTimeout(function(){if(!H.inputpanel.isShow){i(l);a(l);setTimeout(function(){Z(l)},200);G(l)}},20)}function c(l){if(typeof (l.ex)=="undefined"&&F(l,"ime-mode")!="disabled"&&!l.readOnly&&!l.disabled){return true}return false}function i(m){var l=m.getElementsByTagName("input");for(var n=0;n<l.length;n++){var o=l[n];if((o.type=="text"||o.type=="search")&&c(o)){C(o,"input")}}}function a(m){var l=m.getElementsByTagName("textarea");for(var n=0;n<l.length;n++){var o=l[n];if(c(o)){C(o,"textarea")}}}function Z(m){var l=m.getElementsByTagName("iframe");for(var n=0;n<l.length;n++){var q=l[n];if(q.id=="bdime_py"||(typeof (q.ex)!="undefined")){continue}try{var s,r;if(q.contentDocument&&!H.isIE){s=q.contentDocument;r=q.contentWindow}else{if(q.contentWindow.document){s=q.contentWindow.document;r=q}}if(s){if(s.designMode.toLowerCase()=="on"||s.body.contentEditable.toString()=="true"){H.iptTargets.push(q);q.tp="iframe";q.ex=true;Q(r,"focus",X);Q(r,"blur",Y)}else{e(s)}}}catch(p){}}}function G(m){var l=m.getElementsByTagName("div");for(var n=0;n<l.length;n++){var o=l[n];if(o.id=="bdime_py"||(typeof (o.ex)!="undefined")){continue}if(o.contentEditable.toString()=="true"){H.iptTargets.push(o);o.tp="div";o.ex=true;Q(o,"focus",X);Q(o,"blur",Y)}}}function k(){if(j){return }j=setInterval(d,50)}function U(){if(!j){return }clearInterval(j);j=null}function d(){if(H.isClose){return }var p=document.activeElement;if(H.toolbar.isShow){return }if(p&&p.tagName){var l=p.tagName.toLowerCase();if((l=="input"&&(p.type=="text"||p.type=="search")||l=="textarea")&&!p.readOnly&&!p.disabled&&typeof (p.ex)!="undefined"){H.iptCurTarget=p;if(H.status.on){H.keywatcher.rmKeyEvent(p);H.keywatcher.addKeyEvent(p)}H.toolbar.show()}else{if(l=="iframe"){var n,m;if(p.contentDocument&&!H.isIE){n=p.contentDocument;m=p.contentWindow}else{if(p.contentWindow.document){n=p.contentWindow.document;m=n}}if(n&&(n.designMode.toLowerCase()=="on"||n.body.contentEditable.toString()=="true")){H.iptCurTarget=p;if(H.status.on){H.keywatcher.addKeyEvent(m)}H.toolbar.show()}}}}}function h(){e(document);H.build.init();H.toolbar.init();H.drag.init();H.control.init();k();var l=(new Date()).getTime();S(l-B,H.status.on,H.status.ch,H.status.bc,H.status.pt)}function W(m){if(m){var m=m||window.event;var l=m.target||m.srcElement;if(l==H.iptCurTarget){return false}}if(H.isBlur){setTimeout(function(){if(H.inputpanel.isShow){H.inputpanel.hide()}},50)}}function f(){if(typeof bdime_option=="object"){var p=bdime_option;var s=p.on,l=p.ch,r=p.bc,v=p.pt,n=p.domain,o=p.username,q=p.targets,t=p.links,u=p.calls,m=p.hasSug;if(s===true||s===false){H.status.on=s===true?1:0}if(l===true||l===false){H.status.ch=l===true?1:0}if(r===true||r===false){H.status.bc=r===true?1:0}if(v===true||v===false){H.status.pt=v===true?1:0}if(n){H.domain=n}if(o){H.usr=o}if(typeof q=="object"){H.inputs=q}if(t&&t.feedback){H.feedbackLink=t.feedback}if(u){if(u.panelShow){H.panelShow=u.panelShow}if(u.panelHide){H.panelHide=u.panelHide}}if(m){H.hasSug=m}}H.xpc=new K();Q(window,"unload",function(){for(var w in H){delete H[w]}window.bdime=null})}return{init:f,startAutoFocus:k,stopAutoFocus:U,begin:h,end:W}})();H.runner.init();window.bdime=H;window.bdime.data.setTempData=H.data.setTempData;H.open=H.control.openIme;H.close=H.control.closeIme})();